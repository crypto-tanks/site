<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>Battle City</title>
  
  <link rel="stylesheet" type="text/css" href="css/BattleCity.css" />
  
  <script type="text/javascript" src="/battle/lib/jquery-1.7.2.js"></script>

  <script type="text/javascript" src="/battle/src/Utils.js"></script>
  <script type="text/javascript" src="/battle/src/Point.js"></script>
  <script type="text/javascript" src="/battle/src/Rect.js"></script>
  <script type="text/javascript" src="/battle/src/Sprite.js"></script>
  <script type="text/javascript" src="/battle/src/Tank.js"></script>
  <script type="text/javascript" src="/battle/src/Wall.js"></script>
  <script type="text/javascript" src="/battle/src/SpriteContainer.js"></script>
  <script type="text/javascript" src="/battle/src/CollisionDetector.js"></script>
  <script type="text/javascript" src="/battle/src/EventManager.js"></script>
  <script type="text/javascript" src="/battle/src/SpriteController.js"></script>
  <script type="text/javascript" src="/battle/src/TankController.js"></script>
  <script type="text/javascript" src="/battle/src/Keyboard.js"></script>
  <script type="text/javascript" src="/battle/src/BulletFactory.js"></script>
  <script type="text/javascript" src="/battle/src/Bullet.js"></script>
  <script type="text/javascript" src="/battle/src/Painter.js"></script>
  <script type="text/javascript" src="/battle/src/Updater.js"></script>
  <script type="text/javascript" src="/battle/src/BulletExplosionFactory.js"></script>
  <script type="text/javascript" src="/battle/src/Explosion.js"></script>
  <script type="text/javascript" src="/battle/src/BulletExplosion.js"></script>
  <script type="text/javascript" src="/battle/src/BrickWall.js"></script>
  <script type="text/javascript" src="/battle/src/SteelWall.js"></script>
  <script type="text/javascript" src="/battle/src/Cursor.js"></script>
  <script type="text/javascript" src="/battle/src/BlinkTimer.js"></script>
  <script type="text/javascript" src="/battle/src/CursorController.js"></script>
  <script type="text/javascript" src="/battle/src/Builder.js"></script>
  <script type="text/javascript" src="/battle/src/StructureManager.js"></script>
  <script type="text/javascript" src="/battle/src/BrickWallFactory.js"></script>
  <script type="text/javascript" src="/battle/src/SteelWallFactory.js"></script>
  <script type="text/javascript" src="/battle/src/Globals.js"></script>
  <script type="text/javascript" src="/battle/src/SpriteSerializer.js"></script>
  <script type="text/javascript" src="/battle/src/Base.js"></script>
  <script type="text/javascript" src="/battle/src/TankStateAppearing.js"></script>
  <script type="text/javascript" src="/battle/src/TankStateNormal.js"></script>
  <script type="text/javascript" src="/battle/src/TankStateInvincible.js"></script>
  <script type="text/javascript" src="/battle/src/AITankController.js"></script>
  <script type="text/javascript" src="/battle/src/Random.js"></script>
  <script type="text/javascript" src="/battle/src/AITankControllerFactory.js"></script>
  <script type="text/javascript" src="/battle/src/AITankControllerContainer.js"></script>
  <script type="text/javascript" src="/battle/src/EnemyFactory.js"></script>
  <script type="text/javascript" src="/battle/src/Animation.js"></script>
  <script type="text/javascript" src="/battle/src/TankExplosionFactory.js"></script>
  <script type="text/javascript" src="/battle/src/TankExplosion.js"></script>
  <script type="text/javascript" src="/battle/src/PointsFactory.js"></script>
  <script type="text/javascript" src="/battle/src/Points.js"></script>
  <script type="text/javascript" src="/battle/src/PlayerTankFactory.js"></script>
  <script type="text/javascript" src="/battle/src/PlayerTankControllerFactory.js"></script>
  <script type="text/javascript" src="/battle/src/PowerUpFactory.js"></script>
  <script type="text/javascript" src="/battle/src/PowerUp.js"></script>
  <script type="text/javascript" src="/battle/src/PowerUpHandler.js"></script>
  <script type="text/javascript" src="/battle/src/FreezeTimer.js"></script>
  <script type="text/javascript" src="/battle/src/BaseWallBuilder.js"></script>
  <script type="text/javascript" src="/battle/src/ShovelHandler.js"></script>
  <script type="text/javascript" src="/battle/src/Pause.js"></script>
  <script type="text/javascript" src="/battle/src/PauseListener.js"></script>
  <script type="text/javascript" src="/battle/src/BaseExplosionFactory.js"></script>
  <script type="text/javascript" src="/battle/src/BaseExplosion.js"></script>
  <script type="text/javascript" src="/battle/src/TankColor.js"></script>
  <script type="text/javascript" src="/battle/src/SceneManager.js"></script>
  <script type="text/javascript" src="/battle/src/MainMenuScene.js"></script>
  <script type="text/javascript" src="/battle/src/MainMenuItem.js"></script>
  <script type="text/javascript" src="/battle/src/OnePlayerMenuItem.js"></script>
  <script type="text/javascript" src="/battle/src/ConstructionMenuItem.js"></script>
  <script type="text/javascript" src="/battle/src/MainMenu.js"></script>
  <script type="text/javascript" src="/battle/src/MainMenuController.js"></script>
  <script type="text/javascript" src="/battle/src/MainMenuView.js"></script>
  <script type="text/javascript" src="/battle/src/MainMenuCursor.js"></script>
  <script type="text/javascript" src="/battle/src/MainMenuCursorView.js"></script>
  <script type="text/javascript" src="/battle/src/Gamefield.js"></script>
  <script type="text/javascript" src="/battle/src/Level.js"></script>
  <script type="text/javascript" src="/battle/src/EnemyFactoryView.js"></script>
  <script type="text/javascript" src="/battle/src/LivesView.js"></script>
  <script type="text/javascript" src="/battle/src/MainMenuView.js"></script>
  <script type="text/javascript" src="/battle/src/Curtain.js"></script>
  <script type="text/javascript" src="/battle/src/Script.js"></script>
  <script type="text/javascript" src="/battle/src/Delay.js"></script>
  <script type="text/javascript" src="/battle/src/GameScene.js"></script>
  <script type="text/javascript" src="/battle/src/StageMessage.js"></script>
  <script type="text/javascript" src="/battle/src/Stages.js"></script>
  <script type="text/javascript" src="/battle/src/MoveFn.js"></script>
  <script type="text/javascript" src="/battle/src/GameOverMessage.js"></script>
  <script type="text/javascript" src="/battle/src/StageStatisticsScene.js"></script>
  <script type="text/javascript" src="/battle/src/GameOverScene.js"></script>
  <script type="text/javascript" src="/battle/src/Player.js"></script>
  <script type="text/javascript" src="/battle/src/StageStatisticsPoints.js"></script>
  <script type="text/javascript" src="/battle/src/Trees.js"></script>
  <script type="text/javascript" src="/battle/src/Water.js"></script>
  <script type="text/javascript" src="/battle/src/LoadingScene.js"></script>
  <script type="text/javascript" src="/battle/lib/Stats.js"></script>
  <script type="text/javascript" src="/battle/src/FPSCounter.js"></script>
  <script type="text/javascript" src="/battle/src/ImageManager.js"></script>
  <script type="text/javascript" src="/battle/src/Construction.js"></script>
  <script type="text/javascript" src="/battle/src/SpriteSerializerController.js"></script>
  <script type="text/javascript" src="/battle/src/SpriteSerializer.js"></script>
  <script type="text/javascript" src="/battle/src/SoundManager.js"></script>

  <script type="text/javascript">
    $(function () {
      var FPS = 50;
      
      var CANVAS_ID = 'canvas';
      var ctx = createCanvasContext();
      ctx.font = "16px prstart"
      
      var eventManager = new EventManager();
      var keyboard = new Keyboard(eventManager);
      var sceneManager = new SceneManager(eventManager);
      sceneManager.toLoadingScene();
      
      setInterval(gameLoop, 1000 / FPS);
      
      function gameLoop() {
        keyboard.fireEvents();
        sceneManager.update();
        sceneManager.draw(ctx);
      }
      
      function createCanvasContext() {
        $('<canvas id="' + CANVAS_ID + '" width="' + Globals.CANVAS_WIDTH + '" height="' + Globals.CANVAS_HEIGHT + '"></canvas>').prependTo('#main');
        var canvas = document.getElementById(CANVAS_ID);
        return canvas.getContext('2d');
      };
    });
  </script>

</head>

<body>
  <div id="main"></div>
</body>
</html>
